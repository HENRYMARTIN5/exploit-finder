$(window).on('load', function () {
    $("#loader-wrapper").fadeOut(700);
});

function truncateString(str, num) {
    // If the length of str is less than or equal to num
    // just return str--don't truncate it.
    if (str.length <= num) {
      return str
    }
    // Return str truncated with '...' concatenated to the end of str.
    return str.slice(0, num) + '...'
}

function viewExploits(){
    // Overwrite the page's contents with exploits for the platform specified.
    $("#loader-wrapper").fadeIn(700, function(){
        $.get( "./data/" + $("#whatos").val(), function( data ) {
            var html = "";
            // Process data
            for (var key in data) {
                var value = data[key];
                
                html = html + `
                <br><br>
                <h4>{exploitName}</h4>
                <p><b>Bypasses: </b>{bypasses}</p>
                <p><b>Format: </b>{format}</p>
                <p><b>Instructions: </b>{instructions}</p>
                <p><b>Link: </b><a href="{link}">{display_link}</a></p>
                `.replace("{exploitName}", key).replace("{bypasses}", value.bypasses).replace("{format}", value.format).replace("{instructions}", value.instructions).replace("{link}", value.url).replace("{display_link}", truncateString(value.url, 35));
            }
            $("#content").html(html);
            $("#loader-wrapper").fadeOut(700); // Fade out the loader
        });
    });
}